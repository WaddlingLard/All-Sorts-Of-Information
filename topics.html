<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>All Sorts of Information Landing</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="author" content="BrianWu">
    <link rel="stylesheet" href="css/topics.css">

    <!-- <script type="module" src="js/main.js"></script> -->
    <!-- <script type="module" src="js/populatesearch.js"></script>     -->

    <script type="module" src="js/article.js"></script>

  </head>

  <body>

    <header>

      <div id="top">

        <hr class="spacer">


        <!-- <img id="logo" src="img/placeholder.jpg"> -->
        
        <div id="header-left-col">
        
          <a href="index.html">
            <img id="logo" src="img/www-placeholder.png" alt="The logo of the website.">
          </a>
          <!-- <img id="logo" src="img/www-placeholder.png"> -->
        
        </div>
        
        <div id="header-center-col">

          <h1 id="title">A.S.O.I</h1>
        
        </div>

        <!-- <img src="img/placeholder.jpg" hidden> -->

        <div id="header-right-col">

          <div id="login-window">
            <!-- VV CHANGE VV -->
            <form action="index.html" method="POST">

              <table id="login-table">
                <caption>Login Window</caption>
                <thead>
                  <tr>
                    <!-- <th colspan="col">Info</th> -->
                    <th colspan="2"></th>
                    <!-- <th colspan="col"></th> -->
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <!-- <th colspan="col"> -->
                      <!-- <label for="username">Username: </label> -->
                    <!-- </th> -->
                    <th colspan="1">
                      <input type="text" name="username" id="username" placeholder="Username">
                    </th>
                    <td rowspan="1">
                      <button class="login-button">Sign up</button>
                    </td>
                  </tr>
                  <tr>
                    <!-- <th colspan="col"> -->
                      <!-- <label for="password">Password: </label> -->
                    <!-- </th> -->
                    <th colspan="1">
                      <input type="password" name="password" id="password" placeholder="Password">
                    </td>
                    <td rowspan="1">
                      <button class="login-button" type="submit">Login</button>
                    </td>
                  </tr>
                </tbody>
              </table>

                <!-- WHEN USER LOGS IN -->
                <p id="login-text" hidden>Hello, {USER}!</p>

              </form>
              
            </div>

          </div>

        </div>

        <hr class="spacer">

      </div>

    </header>

    <div id="navigation">

      <!-- <hr class="flex-spacer"> -->

      <nav>

        <div id="nav-choices">

          <a class="link" href="topics.html">Topics</a>
          <a class="link" href="discussions.html">Discussions</a>
          <a class="link" href="#">About Us</a>
          <a class="link" href="#">Users? (W.I.P)</a>

          <div id="search-form">
            <!-- VV CHANGE VV -->
            <form action="index.html" method="GET">
              <label for="search-bar">Search: </label>

              <input id="search-bar" list="articles" name="search-bar">
              <datalist id="articles">
                <!-- Populate list -->
              </datalist>

              <button id="search-button" type="submit">Look For</button>
            </form>
          </div>

        </div>

      </nav>

      <!-- <hr class="flex-spacer"> -->
      
    </div>

    <hr class="divider">

    <div id="content-section">
      <hr class="spacer">

      <article>
        <!-- <h2>Hello.......</h2> -->
        <h2>Topics</h2>

        <div id="content">
          <h3 id="content-header">Articles (Loading)</h3>
          <!-- <ul id="link-list"> -->
          <div id="link-list">
            <!-- Add content from the topics table -->

          </div>

          <!-- </ul> -->
          <p>
            Don't see something you like? If so, you can add your own article to the website so you and others can post/interact on that topic.
          </p>

          <div id="add-page">
            <a href="makepage.html">Click here to add a <strong><em>new</em></strong> page!</a>
          </div>
          
        </div>
      </article>

      <hr class="spacer">
    </div>

    <hr class="divider">

    <footer>

      <!-- <hr class="spacer"> -->
      <hr class="flex-spacer">

      <div id="footer-content">
        <div id="footer-left-col">
          <h3>Contact Me</h3>
          <p>
            <a href="mailto: brianwu@u.boisestate.edu">My Email!</a>
          </p>
          <p>
            <a href="https://github.com/WaddlingLard">GitHub</a>
          </p>
        </div>

        <div id="footer-center-col">
          <h3>Users</h3>
          <p>
            <a class="link" href="#">Users? (W.I.P)</a>
          </p>
        </div>

        <div id="footer-right-col">
          <h3>About Us</h3>
          <p>
            <a class="link" href="#">About Us</a>
    
          </p>
        </div>
      </div>

      <!-- <hr class="spacer"> -->
      <hr class="flex-spacer">

      <!-- <script>

        window.onload = loaded;
        
        const links = document.querySelector("#link-list");
        // console.log("Loading Articles!");

        // When the page is loaded, there will be a request that will grab all of the articles
        function loaded() {

          console.log("Loading Articles!");
          const linkAPIRoute = "https://06hoz1o347.execute-api.us-east-2.amazonaws.com/items";

          try {

            let xhr = new XMLHttpRequest();
            // console.log("Created XHR Request");

            xhr.responseType = "json";

            xhr.addEventListener("load", function() {

              console.log("Loaded!");
              // Making sure the body is clean
              if (xhr.status === 200) { 
                links.innerHTML = "";
              }

              xhr.response.forEach(element => {
                const listItem = document.createElement("li");
                const link = document.createElement("a");

                link.href = `article.html/${element.id}`;
                setArticle(`${element.id}`);
                link.innerHTML = `${element.price}`;

                // Adding link to the list item
                listItem.appendChild(link);

                // Adding the list item to the list
                links.appendChild(listItem);
              });

            });

            xhr.open("GET", linkAPIRoute);
            // Send request
            xhr.send();

          } catch (error) {
            console.error(`XHR error code ${xhr.status}`);
          }

        }


      </script> -->

      
    </footer>
    
  </body>

</html>